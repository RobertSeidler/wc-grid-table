!function(){"use strict";var t=[],e=function(e,n){var o=document.head||document.getElementsByTagName("head")[0],r=t[t.length-1];if((n=n||{}).insertAt=n.insertAt||"bottom","top"===n.insertAt)r?r.nextSibling?o.insertBefore(e,r.nextSibling):o.appendChild(e):o.insertBefore(e,o.firstChild),t.push(e);else{if("bottom"!==n.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");o.appendChild(e)}},n="/* body {\r\n  font: arial, sans-serif;\r\n} */\n.wgt-grid-container {\n  display: grid;\n  position: absolute;\n  max-height: 500px;\n  overflow-y: scroll;\n  background: lightgray;\n  /* grid-gap: 1px; */\n  /* grid-row-gap: 2px; */\n  grid-column-gap: 2px;\n  border: 1px solid lightgray;\n}\n.wgt-header {\n  font-weight: bold;\n  position: sticky;\n  top: 0px;\n  border-bottom: 1px solid lightgray;\n}\n.wgt-filter_cell {\n  position: sticky;\n  top: 40px;\n}\n.wgt-filter_input {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  padding-left: 5px;\n  padding-right: 5px;\n  font-size: 1rem;\n}\n.wgt-cell {\n  box-sizing: border-box;\n  font-size: 1rem;\n  padding-left: 20px;\n  padding-right: 20px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background: white;\n  /* border: 2px solid lightgray; */\n}\n.wgt-zebra_1 {\n  background: white;\n}\n.wgt-zebra_0 {\n  background: rgb(230, 230, 230);\n}\n.wgt-footer {\n  display: grid;\n  position: sticky;\n  bottom: 0px;\n  background: white;\n  border-top: 1px solid lightgray;\n  grid-template-rows: 1fr;\n  grid-template-columns: 1fr 1fr 1fr;\n}\n.wgt-footer_cell {\n  border-right: 1px solid lightgray;\n}\n";(function(t,n,o){o=o||{};var r=document.createElement("style");for(var i in r.type="text/css",n)if(n.hasOwnProperty(i)){var a=n[i];r.setAttribute("data-"+i,a)}r.sheet?(r.innerHTML=t,r.sheet.cssText=t,e(r,{insertAt:o.insertAt})):r.styleSheet?(e(r,{insertAt:o.insertAt}),r.styleSheet.cssText=t):(r.appendChild(document.createTextNode(t)),e(r,{insertAt:o.insertAt}))})(n,{href:"src\\wc-grid-table.css"},{insertAt:"bottom"});var o=function(){function t(t,e){let n="!!!"===t.substring(0,3);t=n?t.substring(3):t;let o=e.toString().match(new RegExp(t,"i")),r=Boolean(o)&&o.length>0;return n?!r:r}function e(t,e){return null==t?1:null==e?-1:t-e}function n(t,e){let n=0;return null==t?1:null==e?-1:(t>e&&(n=-1),t<e&&(n=1),n)}function o(t,e,n){return Number.isNaN(e.reduce((t,e)=>t+=null!=e[n]?Number.parseFloat(e[n]):0,0))?t.customCompareText:t.customCompareNumbers}function r(t,e,n){if(t.sortedBy.length>0){if(t.sortedBy[0].col===e)return t.sortedBy[0].dir="asc"===t.sortedBy[0].dir?"desc":"asc",t.sortedData=[].concat(t.sortedData.filter(t=>null!=t[e]).reverse(),t.sortedData.filter(t=>null==t[e])),void t.redrawData();t.sortedBy.unshift({col:e,dir:"asc"})}else t.sortedBy.push({col:e,dir:"asc"});t.sortedData=t.sortedData.sort((n,o)=>t.customChooseSortsCompareFn(t,t.sortedData,e)(n[e],o[e])),t.redrawData()}function i(t,e,n){t.filter[e]=n.srcElement.value,t.redrawData()}function a(t,e){let n=document.createElement("div");n.classList.add("wgt-footer"),n.style.gridColumn=`1 / ${t.header.length+1}`;let o=document.createElement("div");o.innerHTML=`Total: ${e.length}`,o.classList.add("wgt-footer_cell","wgt-cell"),n.append(o),t.append(n)}function s(t){t.drawOptionals={header:!t.hasAttribute("noheader"),filter:!t.hasAttribute("nofilter"),footer:!t.hasAttribute("nofooter")},t.innerHTML="",t.sortedData||(t.sortedData=t.data),!t.header&&t.data&&(t.header=t.data.map(Object.keys).reduce((t,e)=>{let n=t;return e.forEach(e=>{t.includes(e)||n.push(e)}),n},[])),t.drawOptionals.header&&t.header&&(t.style.gridTemplateColumns=`repeat(${t.header.length}, max-content)`,function(t){t.header.forEach((e,n)=>{let o=document.createElement("div");o.classList.add("wgt-header"),o.classList.add(`wgt-column_${e}`),o.classList.add("wgt-cell"),function(t,e,n){o.addEventListener("click",t=>r(n,e,t))}(0,e,t),o.innerHTML=e,t.append(o),console.log(o.clientHeight)})}(t)),t.drawOptionals.filter&&t.header&&function(t,e,n){e.forEach(e=>{let o=document.createElement("div"),r=document.createElement("input");r.type="text",r.classList.add("wgt-filter_input"),r.value=n[e]?n[e]:"",r.addEventListener("input",n=>i.bind(null,t,e)(n)),o.classList.add("wgt-filter_cell",`wgt-filter_cell_${e}`),o.append(r),t.append(o)})}(t,t.header,t.filter),t.data&&(t.displayedData=l(t),t.drawOptionals.footer&&a(t,t.displayedData))}function l(t){var e,n,o;!function(t,e,n,o,r){if(r.active){let r=document.createElement("style");r.type="text/css",n.forEach(t=>{o.forEach(n=>{n.condition(e,t)&&(r.innerHTML+=`\n              div.wgt-column_${t}.wgt-data_cell {\n                ${n.styles.join("\n")}\n              }\n            `)})}),t.root_document.querySelector("head").append(r)}}(t,t.sortedData,t.header,t.conditionalColumnStyle,t.conditionalColumnOptions);let r=function(t,e,n,o,r){return r.active?e.filter(e=>n.map(n=>!o[n]||t.customFilterFunction(o[n],e[n])).reduce((t,e)=>t&&e,!0)):e}(t,(e=t.sortedData,n=t.header,o=t.formatter,t.formatterOptions.active?e.map((t,e,r)=>{let i={};return n.forEach(n=>{o[n]?i[n]=o[n].reduce((t,n)=>n(t,e,r),t[n]):i[n]=t[n]}),i}):e),t.header,t.filter,t.filterOptions);return t.style.gridTemplateRows=`${t.drawOptionals.header?"max-content":""} ${t.drawOptionals.filter?"max-content":""} repeat(${r.length}, max-content) ${t.drawOptionals.footer?"max-content":""}`,function(t,e){r.forEach((e,n)=>{t.header.forEach((o,r)=>{let i=document.createElement("div");i.classList.add("wgt-cell","wgt-data_cell",`wgt-column_${o}`,`wgt-row_${n}`,`wgt-zebra_${n%2}`),i.innerHTML=null!=e[o]?e[o]:"",t.append(i)})})}(t),r}class d extends HTMLElement{constructor(){super(),this.useDefaultOptions()}useDefaultOptions(){this.root_document=document,this.optionalDebounceFn=void 0,this.conditionalColumnStyle=[{condition:(t,e)=>!Number.isNaN(t.reduce((t,n)=>t+="string"==typeof n[e]?NaN:null!=n[e]?n[e]:0,0)),styles:["text-align: right;"]}],this.conditionalColumnOptions={active:!0},this.formatter={},this.formatterOptions={active:!0},this.filter={},this.filterOptions={active:!0},this.customFilterFunction=t,this.sortedBy=[],this.sortOptions={active:!0},this.customCompareNumbers=e,this.customCompareText=n,this.customChooseSortsCompareFn=o,this.drawOptionals={}}connectedCallback(){this.classList.add("wgt-grid-container"),!this.sortedData&&this.data&&(this.sortedData=this.data),s(this)}setDebounceFn(t,e,n){this.optionalDebounceFn&&(r.cancel(),i.cancel()),this.optionalDebounceFn=t,r=this.optionalDebounceFn(r,...e),i=this.optionalDebounceFn(i,...n)}setData(t){this.data=t,this.sortedData=t,s(this)}getDisplayedData(){return this.displayedData}getOriginalData(){return this.data}redrawData(){this.root_document.querySelectorAll("div.wgt-data_cell, div.wgt-footer").forEach(t=>this.removeChild(t),this),this.data&&(this.displayedData=l(this),this.drawOptionals.footer&&a(this,this.displayedData))}}return{regexFilter:t,textFilter:function(t,e){let n="!!!"===t.substring(0,3);t=n?t.substring(3):t;let o=e.toString().toUpperCase().includes(t.toUpperCase());return n?!o:o},compareNumbers:e,compareText:n,chooseSortsCompareFn:o,defineCustomElement:function(){customElements.define("wc-grid-table",d)},TableComponent:d}}(),r={};(function(t){var e=NaN,n="[object Symbol]",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,d="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=d||c||Function("return this")(),p=Object.prototype.toString,f=Math.max,h=Math.min,m=function(){return u.Date.now()};function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==n}(t))return e;if(g(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=g(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var d=a.test(t);return d||s.test(t)?l(t.slice(2),d?2:8):i.test(t)?e:+t}r=function(t,e,n){var o,r,i,a,s,l,d=0,c=!1,u=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=o,i=r;return o=r=void 0,d=e,a=t.apply(i,n)}function w(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-d>=i}function v(){var t=m();if(w(t))return x(t);s=setTimeout(v,function(t){var n=e-(t-l);return u?h(n,i-(t-d)):n}(t))}function x(t){return s=void 0,p&&o?y(t):(o=r=void 0,a)}function D(){var t=m(),n=w(t);if(o=arguments,r=this,l=t,n){if(void 0===s)return function(t){return d=t,s=setTimeout(v,e),c?y(t):a}(l);if(u)return s=setTimeout(v,e),y(l)}return void 0===s&&(s=setTimeout(v,e)),a}return e=b(e)||0,g(n)&&(c=!!n.leading,i=(u="maxWait"in n)?f(b(n.maxWait)||0,e):i,p="trailing"in n?!!n.trailing:p),D.cancel=function(){void 0!==s&&clearTimeout(s),d=0,o=l=r=s=void 0},D.flush=function(){return void 0===s?a:x(m())},D}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const{defineCustomElement:i}=o;i();let a=document.createElement("wc-grid-table");a.formatter.Einzelpreis=[(t,e,n)=>null!=t&&""!=t?`${Number.parseFloat(t).toFixed(2)} \u20ac`:""],a.formatter.Rabattsatz=[(t,e,n)=>null!=t?`${Number.parseFloat(t).toFixed(2)} %`:""];try{a.setDebounceFn(r,[500,{leading:!0,trailing:!1,maxWait:1e3}],[500,{leading:!1,trailing:!0,maxWait:1e3}]),console.info("Optional Dependency lodash.debounce was loaded successfully.")}catch(s){console.error(s),console.warn("Optional Dependency lodash.debounce doesn't seem to be installed, so event functions are not going to be debounced.")}fetch("../data.json").then(t=>t.json()).then(t=>(console.log(t),t)).then(t=>setTimeout(()=>a.setData(t.map(t=>t)),0)),document.addEventListener("DOMContentLoaded",function(t){document.querySelector("#con").append(a)})}();