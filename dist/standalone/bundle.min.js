!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).WcGridTable=t()}}(function(){var t=[],e=function(e,n){var r=document.head||document.getElementsByTagName("head")[0],o=t[t.length-1];if((n=n||{}).insertAt=n.insertAt||"bottom","top"===n.insertAt)o?o.nextSibling?r.insertBefore(e,o.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),t.push(e);else{if("bottom"!==n.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(e)}},n="/* body {\r\n  font: arial, sans-serif;\r\n} */\n.wgt-grid-container {\n  display: grid;\n  position: absolute;\n  max-height: 500px;\n  overflow-y: scroll;\n  background: lightgray;\n  /* grid-gap: 1px; */\n  /* grid-row-gap: 2px; */\n  grid-column-gap: 2px;\n  border: 1px solid lightgray;\n}\n.wgt-header {\n  font-weight: bold;\n  position: sticky;\n  box-sizing: border-box;\n  top: 0px;\n  border-bottom: 1px solid lightgray;\n}\n.wgt-filter_cell {\n  position: sticky;\n  top: 40px;\n}\n.wgt-filter_input {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  padding-left: 5px;\n  padding-right: 5px;\n  font-size: 1rem;\n  border: 1px solid lightgray;\n}\n.wgt-cell {\n  box-sizing: border-box;\n  font-size: 1rem;\n  padding-left: 20px;\n  padding-right: 20px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background: white;\n  /* border: 2px solid lightgray; */\n}\n.wgt-zebra_1 {\n  background: white;\n}\n.wgt-zebra_0 {\n  background: rgb(230, 230, 230);\n}\n.wgt-footer {\n  display: grid;\n  position: sticky;\n  bottom: 0px;\n  background: white;\n  border-top: 1px solid lightgray;\n  grid-template-rows: 1fr;\n  grid-template-columns: 1fr 1fr 1fr;\n}\n.wgt-footer_cell {\n  border-right: 1px solid lightgray;\n}\n";(function(t,n,r){r=r||{};var o=document.createElement("style");for(var i in o.type="text/css",n)if(n.hasOwnProperty(i)){var a=n[i];o.setAttribute("data-"+i,a)}o.sheet?(o.innerHTML=t,o.sheet.cssText=t,e(o,{insertAt:r.insertAt})):o.styleSheet?(e(o,{insertAt:r.insertAt}),o.styleSheet.cssText=t):(o.appendChild(document.createTextNode(t)),e(o,{insertAt:r.insertAt}))})(n,{href:"src\\wc-grid-table.css"},{insertAt:"bottom"});return function(){function t(t,e){let n="!!!"===t.substring(0,3);t=n?t.substring(3):t;let r=e.toString().match(new RegExp(t,"i")),o=Boolean(r)&&r.length>0;return n?!o:o}function e(t,e){return null==t?1:null==e?-1:t-e}function n(t,e){let n=0;return null==t?1:null==e?-1:(t>e&&(n=-1),t<e&&(n=1),n)}function r(t,e,n){return Number.isNaN(e.reduce((t,e)=>t+=null!=e[n]?Number.parseFloat(e[n]):0,0))?t.customCompareText:t.customCompareNumbers}function o(t,e,n){if(t.sortedBy.length>0){if(t.sortedBy[0].col===e)return t.sortedBy[0].dir="asc"===t.sortedBy[0].dir?"desc":"asc",t.sortedData=[].concat(t.sortedData.filter(t=>null!=t[e]).reverse(),t.sortedData.filter(t=>null==t[e])),void t.redrawData();t.sortedBy.unshift({col:e,dir:"asc"})}else t.sortedBy.push({col:e,dir:"asc"});t.sortedData=t.sortedData.sort((n,r)=>t.customChooseSortsCompareFn(t,t.sortedData,e)(n[e],r[e])),t.redrawData()}function i(t,e,n){t.filter[e]=n.srcElement.value,t.redrawData()}function a(t,e){let n=document.createElement("div");n.classList.add("wgt-footer"),n.style.gridColumn=`1 / ${t.header.length+1}`;let r=document.createElement("div");r.innerHTML=`Total: ${e.length}`,r.classList.add("wgt-footer_cell","wgt-cell"),n.append(r),t.append(n)}function s(t){t.drawOptionals={header:!t.hasAttribute("noheader"),filter:!t.hasAttribute("nofilter"),footer:!t.hasAttribute("nofooter")},t.innerHTML="",t.sortedData||(t.sortedData=t.data),!t.header&&t.data&&(t.header=t.data.map(Object.keys).reduce((t,e)=>{let n=t;return e.forEach(e=>{t.includes(e)||n.push(e)}),n},[])),t.drawOptionals.header&&t.header&&(t.style.gridTemplateColumns=`repeat(${t.header.length}, max-content)`,function(t){t.header.forEach((e,n)=>{let r=document.createElement("div");r.classList.add("wgt-header"),r.classList.add(`wgt-column_${e}`),r.classList.add("wgt-cell"),function(t,e,n){r.addEventListener("click",t=>o(n,e,t))}(0,e,t),r.innerHTML=e,t.append(r),console.log(r.clientHeight)})}(t)),t.drawOptionals.filter&&t.header&&function(t,e,n){e.forEach(e=>{let r=document.createElement("div"),o=document.createElement("input");o.type="text",o.classList.add("wgt-filter_input"),o.value=n[e]?n[e]:"",o.addEventListener("input",n=>i.bind(null,t,e)(n)),r.classList.add("wgt-filter_cell",`wgt-filter_cell_${e}`),r.append(o),t.append(r)})}(t,t.header,t.filter),t.data&&(t.displayedData=l(t),t.drawOptionals.footer&&a(t,t.displayedData))}function l(t){var e,n,r;!function(t,e,n,r,o){if(o.active){let o=document.createElement("style");o.type="text/css",n.forEach(t=>{r.forEach(n=>{n.condition(e,t)&&(o.innerHTML+=`\n              div.wgt-column_${t}.wgt-data_cell {\n                ${n.styles.join("\n")}\n              }\n            `)})}),t.root_document.querySelector("head").append(o)}}(t,t.sortedData,t.header,t.conditionalColumnStyle,t.conditionalColumnOptions);let o=function(t,e,n,r,o){return o.active?e.filter(e=>n.map(n=>!r[n]||t.customFilterFunction(r[n],e[n])).reduce((t,e)=>t&&e,!0)):e}(t,(e=t.sortedData,n=t.header,r=t.formatter,t.formatterOptions.active?e.map((t,e,o)=>{let i={};return n.forEach(n=>{r[n]?i[n]=r[n].reduce((t,n)=>n(t,e,o),t[n]):i[n]=t[n]}),i}):e),t.header,t.filter,t.filterOptions);return t.style.gridTemplateRows=`${t.drawOptionals.header?"max-content":""} ${t.drawOptionals.filter?"max-content":""} repeat(${o.length}, max-content) ${t.drawOptionals.footer?"max-content":""}`,function(t,e){o.forEach((e,n)=>{t.header.forEach((r,o)=>{let i=document.createElement("div");i.classList.add("wgt-cell","wgt-data_cell",`wgt-column_${r}`,`wgt-row_${n}`,`wgt-zebra_${n%2}`),i.innerHTML=null!=e[r]?e[r]:"",t.append(i)})})}(t),o}class d extends HTMLElement{constructor(){super(),this.useDefaultOptions()}useDefaultOptions(){this.root_document=document,this.optionalDebounceFn=void 0,this.conditionalColumnStyle=[{condition:(t,e)=>!Number.isNaN(t.reduce((t,n)=>t+="string"==typeof n[e]?NaN:null!=n[e]?n[e]:0,0)),styles:["text-align: right;"]}],this.conditionalColumnOptions={active:!0},this.formatter={},this.formatterOptions={active:!0},this.filter={},this.filterOptions={active:!0},this.customFilterFunction=t,this.sortedBy=[],this.sortOptions={active:!0},this.customCompareNumbers=e,this.customCompareText=n,this.customChooseSortsCompareFn=r,this.drawOptionals={}}connectedCallback(){this.classList.add("wgt-grid-container"),!this.sortedData&&this.data&&(this.sortedData=this.data),s(this)}setDebounceFn(t,e,n){this.optionalDebounceFn&&(o.cancel(),i.cancel()),this.optionalDebounceFn=t,o=this.optionalDebounceFn(o,...e),i=this.optionalDebounceFn(i,...n)}setData(t){this.data=t,this.sortedData=t,s(this)}getDisplayedData(){return this.displayedData}getOriginalData(){return this.data}redrawData(){this.root_document.querySelectorAll("div.wgt-data_cell, div.wgt-footer").forEach(t=>this.removeChild(t),this),this.data&&(this.displayedData=l(this),this.drawOptionals.footer&&a(this,this.displayedData))}}return{regexFilter:t,textFilter:function(t,e){let n="!!!"===t.substring(0,3);t=n?t.substring(3):t;let r=e.toString().toUpperCase().includes(t.toUpperCase());return n?!r:r},compareNumbers:e,compareText:n,chooseSortsCompareFn:r,defineCustomElement:function(){customElements.define("wc-grid-table",d)},TableComponent:d}}()});